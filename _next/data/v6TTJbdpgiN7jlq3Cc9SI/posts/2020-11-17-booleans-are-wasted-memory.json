{"pageProps":{"post":{"slug":"2020-11-17-booleans-are-wasted-memory","markdownBody":"\nA boolean is either `true` or `false`. That translates to `1` or `0`. If you think that one bit is enough to store this information, you'd be wrong.\n\nIn order to keep the binary layout of a program simple and convenient, most languages store information in 8 bit (1 byte) blocks.\nIf you allocate a `bool` in Rust or (most) other languages that are based on LLVM, [it will take up 1 `i1`, or 1 byte of memory](https://llvm.org/docs/LangRef.html#simple-constants). If you allocate a boolean value in C, you will get [an integer constant with a value of either 1 or 0](https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdbool.h.html).\n\nIf you find yourself having to store multiple boolean states somewhere, you might simply declare those booleans and call it a day:\n\n```c\n#include <stdbool.h>\n#include <stdio.h>\nint main()\n{\n    bool can_read = true;\n    bool can_write = true;\n    bool can_execute = false;\n\n    if (can_read)\n        printf(\"read bit set\\n\");\n    if (can_write)\n        printf(\"write bit set\\n\");\n    if (can_execute)\n        printf(\"execute bit set\\n\");\n\n    // Output:\n    // read bit set\n    // write bit set\n}\n```\n\n## We can do better than this\n\nAn alternative approach to store boolean values is to share a \"chunk\" of bits with other values. This is usually done using bitwise operations:\n\n```c\n#include <stdbool.h>\n#include <stdio.h>\n\n// Define permissions\n#define PERM_NONE       0b000\n#define PERM_READ       0b001\n#define PERM_WRITE      0b010\n#define PERM_EXECUTE    0b100\n\n#define PERM_ALL        PERM_READ | PERM_WRITE | PERM_EXECUTE\n\nint main()\n{\n    // Allocate 1 byte for permissions\n    char permissions = PERM_READ | PERM_WRITE;\n\n    if (permissions & PERM_READ)\n        printf(\"write bit set\\n\");\n    if (permissions & PERM_WRITE)\n        printf(\"read bit set\\n\");\n    if (permissions & PERM_EXECUTE)\n        printf(\"execute bit set\\n\");\n\n    // Output:\n    // read bit set\n    // write bit set\n}\n```\n\nThis example still wastes 5 bits since we only use 3 out of 8 possible bits of the char type, but I'm sure you get the point. Allocating 3 boolean values independently would waste 7 \\* 3 = 21 bits, so it's a massive improvement. Whenever you find yourself needing multiple boolean values, think twice if you can use this pattern.\n\nMicrocontrollers have a very constrainted environment, therefore bitwise operations are essential in those scenarios. 7 wasted bits are a lot if there are only 4 kb of total memory available. For larger systems we often forget about these constraints, until they add up.\n\n## My Plea\n\n- Be mindful about the software you create.\n- Appreciate the resources at your disposal.\n","frontmatter":{"title":"Booleans are wasted memory","date":"2020-11-17","tags":"note, guide, programming, tech"},"tags":["note","guide","programming","tech"]},"recommendedPosts":[{"slug":"2026-02-13-n8n-nodes-open5e-n8n-community-node-that-lets-you-access-d-d-5th-edition-srd-content","frontmatter":{"title":"n8n-nodes-open5e: n8n community node that lets you access D&D 5th edition SRD content","date":"2026-02-13","tags":"note, tech, programming, n8n, automation, ttrpg"},"tags":["note","tech","programming","n8n","automation","ttrpg"]},{"slug":"2026-02-04-a-fix-for-long-pressing-movement-keys-in-vscode-with-vim-mode","frontmatter":{"title":"A fix for long-pressing movement keys in VSCode with Vim-Mode","date":"2026-02-04","tags":"guide, note, editors, tech, programming, vim"},"tags":["guide","note","editors","tech","programming","vim"]},{"slug":"2025-12-11-custom-entities-in-home-assistant","frontmatter":{"title":"Custom Entities in Home Assistant","date":"2025-12-11","tags":"guide, note, homeassistant, homelab, tech, programming"},"tags":["guide","note","homeassistant","homelab","tech","programming"]},{"slug":"2025-09-15-making-family-it-support-effortless-and-free","frontmatter":{"title":"Making family IT support effortless (and free)","date":"2025-09-15","tags":"note, life, tech"},"tags":["note","life","tech"]},{"slug":"2025-06-11-git-diff-ignore-all-space-makes-code-reviews-way-easier","frontmatter":{"title":"git diff --ignore-all-space makes code review way easier","date":"2025-06-11","tags":"guide, note, til, git, tech, programming"},"tags":["guide","note","til","git","tech","programming"]}]},"__N_SSG":true}